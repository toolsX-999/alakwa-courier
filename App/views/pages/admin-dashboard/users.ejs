<%- include('./layout') %>
    <!-- content -->
    <!-- Note: Set this container as "container-fluid" so it spans the whole screen width when zoomed-in or out -->
    <!-- To test the effect of the "container-fluid", remove the "fluid" and zoom-in the page to 25%-->
    <div class="container-fluid dashboard-content-area mt-5 pt-3">
        <!-- Breadcrumb -->
        <nav class="my-4 ps-1" aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/admin/dashboard">Dashboard</a></li>
                <li class="breadcrumb-item"><a href="/admin/dashboard/users">Users</a></li>
                <li class="breadcrumb-item active" aria-current="page" id="breadcrumb-item-active">users(s)</li>
            </ol>
        </nav>
        <!-- Breadcrumb -->

        <div class="row">
            <!-- Tabs -->
            <div class="col-12 my-3">
                <!-- Tab nav -->
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link <%= activeTab == 'home-tab-pane'? 'active' : ''%>" id="home-tab"
                            data-bs-toggle="tab" data-bs-target="#home-tab-pane" type="button" role="tab"
                            aria-controls="home-tab-pane" aria-selected="true"><span><i
                                    class="fas fa-users me-2"></i></span>User(s)</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link <%= activeTab == 'profile-tab-pane'? 'active' : ''%>" id="profile-tab"
                            data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab"
                            aria-controls="profile-tab-pane" aria-selected="false"><i
                                class="fas fa-user-tag me-2"></i></span>Role(s)</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link <%= activeTab == 'contact-tab-pane'? 'active' : ''%>" id="contact-tab"
                            data-bs-toggle="tab" data-bs-target="#contact-tab-pane" type="button" role="tab"
                            aria-controls="contact-tab-pane" aria-selected="false"><i
                                class="fas fa-user-shield me-2"></i></span>Permission(s)
                        </button>
                    </li>
                    <li class="nav-item <%= activeTab == 'disabled-tab-pane'? 'active' : ''%>" role="presentation">
                        <button class="nav-link" id="disabled-tab" data-bs-toggle="tab"
                            data-bs-target="#disabled-tab-pane" type="button" role="tab"
                            aria-controls="disabled-tab-pane" aria-selected="false"><i
                                class="fas fa-user-plus me-2"></i></span>Add User(s)</button>
                    </li>
                </ul>
                <!-- Tab nav end -->
                <div class="tab-content" id="myTabContent">
                    <!-- For the tab shows on form submission basd o PRG, set it in each dic class here as active and show -->
                    <!-- User(s) -->
                    <!-- <div class="tab-pane fade show active my-5" id="home-tab-pane" role="tabpanel" -->
                    <div class="tab-pane fade my-5 <%= activeTab ===  'home-tab-pane'? 'show active' : ''%>"
                        id="home-tab-pane" role="tabpanel" aria-labelledby="home-tab" tabindex="0">
                        <% if (users==="" || typeof users==="undefined" ) { %>
                            <h4 class="mt-5">No Records</h4>
                            <% } %>
                                <!-- DataTable -->
                                <% if (users.length> 0) { %>
                                    <div class="container pt-3">
                                        <h6 class="ps-2 pt-2">RECORDS</h6>
                                        <hr class="table-group-divider">
                                        <div class="row table-responsive">
                                            <table id="recordsTable" class="display compact" style="width:100%">
                                                <thead class="bg-dark text-white">
                                                    <tr>
                                                        <th>Name</th>
                                                        <th>Email</th>
                                                        <th>Role</th>
                                                        <th>Age</th>
                                                        <th>Created date</th>
                                                        <th class="text-center">Action</th>
                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <% users.forEach(user=> { %>
                                                        <tr>
                                                            <td><a href="#">
                                                                    <%= user.fullName %>
                                                                </a></td>
                                                            <td><a href="#">
                                                                    <%= user.email %>
                                                                </a></td>
                                                            <td>
                                                                <%= user.role %>
                                                            </td>
                                                            <td class="text-center">61</td>
                                                            <td>
                                                                <%= user.createdAt.toLocaleString() %>
                                                            </td>
                                                            <td>
                                                                <div class="action-icons d-flex">
                                                                    <!-- View -->
                                                                    <a href="#" data-bs-toggle="modal"
                                                                        data-bs-target="#viewModal-<%= user._id %>"
                                                                        data-bs-whatever="@mdo" title="Edit">
                                                                        <span class="ms-3">
                                                                            <i class="fas fa-eye">
                                                                            </i>
                                                                        </span>
                                                                    </a>
                                                                    <div class="modal fade"
                                                                        id="viewModal-<%= user._id %>" tabindex="-1"
                                                                        aria-labelledby="viewModalLabel-<%= user._id %>"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title"
                                                                                        id="viewModalLabel-<%= user._id %>">
                                                                                        View
                                                                                        Mode</h5>
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <div class="mb-3">
                                                                                        <label
                                                                                            for="recipient-name-<%= user._id %>"
                                                                                            class="col-form-label">Full
                                                                                            Name:</label>
                                                                                        <input type="text" readonly
                                                                                            value="<%= user.fullName %>"
                                                                                            class="form-control ps-1"
                                                                                            id="recipient-name-<%= user._id %>">
                                                                                    </div>
                                                                                    <div class="mb-3">
                                                                                        <label
                                                                                            for="recipient-name-<%= user._id %>"
                                                                                            class="col-form-label">Email:</label>
                                                                                        <input type="text" readonly
                                                                                            value="<%= user.email %>"
                                                                                            class="form-control ps-1"
                                                                                            id="recipient-name-<%= user._id %>">
                                                                                    </div>
                                                                                    <div class="mb-3">
                                                                                        <label
                                                                                            for="recipient-name-<%= user._id %>"
                                                                                            class="col-form-label">Role</label>
                                                                                        <input type="text" readonly
                                                                                            value="<%= user.role %>"
                                                                                            class="form-control ps-1"
                                                                                            id="recipient-name-<%= user._id %>">
                                                                                    </div>
                                                                                    <div class="mb-3">
                                                                                        <label
                                                                                            for="recipient-name-<%= user._id %>"
                                                                                            class="col-form-label">Registered
                                                                                            on:</label>
                                                                                        <input type="text" readonly
                                                                                            value="<%= user.createdAt.toLocaleString() %>"
                                                                                            class="form-control ps-1"
                                                                                            id="recipient-name-<%= user._id %>">
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- View -->
                                                                    <!-- Edit -->
                                                                    <a href="#" data-bs-toggle="modal"
                                                                        data-bs-target="#editModal-<%= user._id %>"
                                                                        data-bs-whatever="@mdo" title="Edit">
                                                                        <span class="ms-3">
                                                                            <i class="fas fa-edit">
                                                                            </i>
                                                                        </span>
                                                                    </a>
                                                                    <div class="modal fade"
                                                                        id="editModal-<%= user._id %>" tabindex="-1"
                                                                        aria-labelledby="editModalLabel-<%= user._id %>"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title"
                                                                                        id="editModalLabel-<%= user._id %>">
                                                                                        Edit
                                                                                        Mode</h5>
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    <form action="#" method="post">
                                                                                        <div class="mb-3">
                                                                                            <label
                                                                                                for="recipient-name-<%= user._id %>"
                                                                                                class="col-form-label">Full
                                                                                                Name:</label>
                                                                                            <input type="text"
                                                                                                name="fullName"
                                                                                                value="<%= user.fullName %>"
                                                                                                class="form-control"
                                                                                                id="recipient-name-<%= user._id %>">
                                                                                        </div>
                                                                                    </form>
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="submit"
                                                                                        class="btn btn-secondary"
                                                                                        data-bs-dismiss="modal">Cancel</button>
                                                                                    <button type="button"
                                                                                        class="btn btn-primary">Submit</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- Edit -->
                                                                    <!-- Delete -->
                                                                    <a href="#" title="Delete" type="button"
                                                                        data-bs-toggle="modal"
                                                                        data-bs-target="#staticBackdrop-<%= user._id %>"
                                                                        title="View">
                                                                        <span class="ms-3">
                                                                            <i class="fas fa-trash text-danger">
                                                                            </i>
                                                                        </span>
                                                                    </a>
                                                                    <!-- Modal -->
                                                                    <div class="modal fade"
                                                                        id="staticBackdrop-<%= user._id %>"
                                                                        data-bs-backdrop="static"
                                                                        data-bs-keyboard="false" tabindex="-1"
                                                                        aria-labelledby="staticBackdropLabel-<%= user._id %>"
                                                                        aria-hidden="true">
                                                                        <div class="modal-dialog modal-dialog-centered">
                                                                            <div class="modal-content">
                                                                                <div class="modal-header">
                                                                                    <h5 class="modal-title"
                                                                                        id="staticBackdropLabel-<%= user._id %>">
                                                                                        Delete Mode</h5>
                                                                                    <button type="button"
                                                                                        class="btn-close"
                                                                                        data-bs-dismiss="modal"
                                                                                        aria-label="Close"></button>
                                                                                </div>
                                                                                <div class="modal-body">
                                                                                    Are you sure you want to
                                                                                    delete <%= user.fullName %>?
                                                                                </div>
                                                                                <div class="modal-footer">
                                                                                    <button type="button"
                                                                                        class="btn btn-secondary"
                                                                                        data-bs-dismiss="modal">Cancel</button>
                                                                                    <button type="button"
                                                                                        class="btn btn-primary">Proceed</button>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <!-- Delete -->
                                                                </div>
                                                            </td>
                                                        </tr>
                                                        <% }) %>
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                    <% } %>
                    </div>
                    <!-- User(s) end -->

                    <!-- Role(s) -->
                    <div class="tab-pane fade  <%= activeTab ===  'profile-tab-pane'? 'show active' : ''%>"
                        id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                        Hello Roles
                    </div>
                    <!-- Role(s) end -->
                    <!-- Permission(s) -->
                    <div class="tab-pane fade <%= activeTab ===  'contact-tab-pane'? 'show active' : ''%>"
                        id="contact-tab-pane" role="tabpanel" aria-labelledby="contact-tab" tabindex="0">
                        Hello Permissions
                    </div>
                    <!-- Permission(s) end -->
                    <!-- Add User(s) -->
                    <div class="tab-pane fade <%= activeTab === 'disabled-tab-pane'? 'show active' : '' %> "
                        id="disabled-tab-pane" role="tabpanel" aria-labelledby="disabled-tab" tabindex="0">
                        <div class="container create-container pt-1 px-0">
                            <div class="container my-4">
                                <div class="row justify-content-start">
                                    <!-- Responsive: 100% on small screens, 50% on medium, 40% on large -->
                                    <div class="col-12 col-md-8 col-lg-6 mx-auto">
                                        <!-- Success feedback card -->
                                        <% if (type==="success" ) { %>
                                            <div class="card shadow-sm mt-4">
                                                <div class="card-header bg-primary text-white">
                                                    <i class="fas fa-check-circle me-2"></i> Success
                                                </div>
                                                <div class="card-body text-center">
                                                    <h6 class="card-title">🎉 Account Created Successfully<h6>
                                                            <p class="card-text text-muted">
                                                                The user account has been created
                                                                successfully.<br>
                                                                Would you like to <strong>view all users</strong> or
                                                                <strong>create another user</strong>?
                                                            </p>
                                                            <a href="/admin/dashboard/users?activeTab=home-tab-pane"
                                                                class="btn btn-outline-primary me-2 mt-4">View
                                                                Users</a>
                                                            <a href="/admin/dashboard/users?activeTab=disabled-tab-pane"
                                                                class="btn btn-outline-primary mt-4">Create User</a>
                                                </div>
                                                <div class="card-footer text-muted small">
                                                    <i class="far fa-clock me-1"></i>
                                                    <%= new Date().toLocaleString() %>
                                                </div>
                                            </div>
                                            <% } %>
                                                <!-- Success feedback card end -->

                                                <!-- Feedback messages -->
                                                <% if (message && type==="Error" ) { %>
                                                    <div class="alert alert-warning alert-dismissible fade show"
                                                        role="alert">
                                                        <strong>
                                                            <%= type %>:
                                                        </strong>
                                                        <%= message %>
                                                            <button type="button" class="btn-close"
                                                                data-bs-dismiss="alert" aria-label="Close"></button>
                                                    </div>
                                                    <% } %>
                                                        <!-- Feedback messages end -->
                                                        <!-- Register user card -->
                                                        <% if (type !=="success" ) { %>
                                                            <div class="card shadow-sm">
                                                                <div
                                                                    class="card-header bg-primary text-white text-center">
                                                                    <h6 class="mb-0">Register Account</h6>
                                                                </div>
                                                                <div class="card-body">
                                                                    <form action="/admin/dashboard/user-create"
                                                                        method="post">
                                                                        <!-- Full Name Field -->
                                                                        <div class="mb-3">
                                                                            <div class="input-group">
                                                                                <span
                                                                                    class="input-group-text rounded-0">
                                                                                    <i class="fas fa-user-alt"></i>
                                                                                </span>
                                                                                <input type="text" name="fullName"
                                                                                    class="form-control rounded-0"
                                                                                    placeholder="Full Name"
                                                                                    aria-label="Full Name" required>
                                                                            </div>
                                                                        </div>
                                                                        <!-- Email Field -->
                                                                        <div class="mb-3">
                                                                            <div class="input-group">
                                                                                <span
                                                                                    class="input-group-text rounded-0">
                                                                                    <i class="fas fa-envelope"></i>
                                                                                </span>
                                                                                <input type="email" name="email"
                                                                                    class="form-control rounded-0"
                                                                                    placeholder="Email"
                                                                                    aria-label="Email" required>
                                                                            </div>
                                                                        </div>
                                                                        <!-- Password Field -->
                                                                        <div class="mb-3">
                                                                            <div class="input-group">
                                                                                <span
                                                                                    class="input-group-text rounded-0">
                                                                                    <i class="fas fa-key"></i>
                                                                                </span>
                                                                                <input type="password" name="password"
                                                                                    class="form-control rounded-0"
                                                                                    placeholder="Password"
                                                                                    aria-label="Password" required>
                                                                            </div>
                                                                        </div>
                                                                        <!-- Confirm Password Field -->
                                                                        <div class="mb-3">
                                                                            <div class="input-group">
                                                                                <span
                                                                                    class="input-group-text rounded-0">
                                                                                    <i class="fas fa-key"></i>
                                                                                </span>
                                                                                <input type="password"
                                                                                    name="confirmPassword"
                                                                                    class="form-control rounded-0"
                                                                                    placeholder="Confirm Password"
                                                                                    aria-label="Confirm Password"
                                                                                    required>
                                                                            </div>
                                                                        </div>
                                                                        <!-- Register Button -->
                                                                        <div class="d-grid mb-3">
                                                                            <button class="btn btn-primary btn"
                                                                                type="submit">Create
                                                                                User</button>
                                                                        </div>
                                                                        <!-- Divider -->
                                                                        <div
                                                                            class="d-flex align-items-center justify-content-center my-3">
                                                                            <hr class="flex-grow-1">
                                                                            <span class="mx-3 text-muted">OR</span>
                                                                            <hr class="flex-grow-1">
                                                                        </div>
                                                                        <!-- Admin Button -->
                                                                        <div class="d-grid">
                                                                            <button class="btn btn-outline-danger btn"
                                                                                type="button">
                                                                                <i class="fas fa-user me-2"></i> As
                                                                                Admin
                                                                            </button>
                                                                        </div>
                                                                    </form>
                                                                </div>
                                                            </div>
                                                            <% } %>
                                                                <!-- Register user card end -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- Add User(s) end -->
                </div>
            </div>
        </div>
        <!-- Tabs end -->
    </div>
    </div>

    <!-- BreadCrumbs -->
    <script src="/js/breadCrumbs.js"></script>
    <!-- BreadCrumbs -->
    <!-- content -->

    <%- include('./layout-footer') %>